-- for endpoint 1drop procedure if exists  [GetTopN]gocreate procedure GetTopN(	@n int = 10)asbegin	--select top(@n) uj1.UserId as userid, uj1.JobId as jobid, uj1.DateTimeCreated as created, j.name as jobname, u.Username as username, u.Lastname as lastname	select top(@n) uj1.DateTimeCreated as created, j.name as jobname, u.Username as username, u.Lastname as lastname	from	userjobs uj1	join users u		on uj1.UserId=u.userid	join jobs j		on uj1.jobid =j.JobId	left join userjobs uj2		on uj1.userid=uj2.userid and uj1.DateTimeCreated<uj2.DateTimeCreated	where uj2.DateTimeCreated is null	order by uj1.DateTimeCreated descendgo-- for endpoint 2drop procedure if exists [GetNAboveMean]gocreate procedure [GetNAboveMean](	@topn int = 5)asbegin	declare @mean int	select @mean = avg(nwork)	from	(select uj.userid, count(*) as nwork	from userjobs uj	group by uj.userid	--order by nwork desc	) as szamok	select top(@topn) uj.userid as userid, count(*) as nwork,u.username as username, u.lastname as lastname	from userjobs uj	right join users u	on uj.userid=u.userid	group by uj.userid, u.username, u.Lastname	having count(*)>@mean	order by nwork descendgo